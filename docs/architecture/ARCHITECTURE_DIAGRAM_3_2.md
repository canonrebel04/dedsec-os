# Phase 3.2 Architecture Diagram & Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEDSEC PHASE 3.2: COMPLETE ARCHITECTURE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 1: APPLICATION FRAMEWORK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Application     â”‚  â”‚  StateContainer  â”‚  â”‚   PreferenceManager      â”‚  â”‚
â”‚  â”‚  (Orchestrates)  â”‚  â”‚  (Central Hub)   â”‚  â”‚   (Persistence)          â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                          â”‚  â”‚
â”‚  â”‚  - Tool Mgmt     â”‚  â”‚  - MenuState     â”‚  â”‚  ~/.dedsec/prefs.json    â”‚  â”‚
â”‚  â”‚  - Event Loop    â”‚  â”‚  - ToolStates    â”‚  â”‚  - Load/Save (atomic)    â”‚  â”‚
â”‚  â”‚  - Lifecycle     â”‚  â”‚  - Settings      â”‚  â”‚  - Auto-save             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                     â”‚                        â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                 â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–¼
LAYER 2: STATE & THEME MANAGEMENT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   MenuState          â”‚              â”‚    ThemeManager                  â”‚ â”‚
â”‚  â”‚   (Navigation)       â”‚              â”‚    (Colors & Styling)            â”‚ â”‚
â”‚  â”‚                      â”‚              â”‚                                  â”‚ â”‚
â”‚  â”‚ Methods:             â”‚              â”‚ Methods:                         â”‚ â”‚
â”‚  â”‚ - push(menu)         â”‚              â”‚ - set_theme(name)                â”‚ â”‚
â”‚  â”‚ - back()             â”‚              â”‚ - get_color(key)                 â”‚ â”‚
â”‚  â”‚ - get_breadcrumb()   â”‚              â”‚ - get_all_colors()               â”‚ â”‚
â”‚  â”‚ - set_selection()    â”‚              â”‚ - interpolate(key, factor)       â”‚ â”‚
â”‚  â”‚ - subscribe_*()      â”‚              â”‚ - subscribe(callback)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ToolState(Abc)     â”‚              â”‚    5 Cyberpunk Themes            â”‚ â”‚
â”‚  â”‚   (Tool Data)        â”‚              â”‚                                  â”‚ â”‚
â”‚  â”‚                      â”‚              â”‚ 1. Neon Green (classic)          â”‚ â”‚
â”‚  â”‚ Methods:             â”‚              â”‚ 2. Synthwave (80s vibes)         â”‚ â”‚
â”‚  â”‚ - mark_running()     â”‚              â”‚ 3. Monochrome (accessible)       â”‚ â”‚
â”‚  â”‚ - set_progress()     â”‚              â”‚ 4. Acid Trip (psychedelic)       â”‚ â”‚
â”‚  â”‚ - mark_complete()    â”‚              â”‚ 5. Stealth Mode (low power)      â”‚ â”‚
â”‚  â”‚ - set_error()        â”‚              â”‚                                  â”‚ â”‚
â”‚  â”‚ - set_result()       â”‚              â”‚ Each: 31 colors (complete UI)    â”‚ â”‚
â”‚  â”‚ - to_dict()          â”‚              â”‚                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 3: MVC ARCHITECTURE (Implemented in Tasks #5-6)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Model   â”‚         â”‚  View    â”‚         â”‚ Controller                     â”‚
â”‚  â”‚  (Logic) â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚(Render)  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ (Input)  â”‚                    â”‚
â”‚  â”‚          â”‚         â”‚          â”‚         â”‚          â”‚                    â”‚
â”‚  â”‚ Abstract â”‚         â”‚ Abstract â”‚         â”‚ Abstract â”‚                    â”‚
â”‚  â”‚ Base     â”‚         â”‚ Base     â”‚         â”‚ Base     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚       â–²                     â–²                    â–²                          â”‚
â”‚       â”‚                     â”‚                    â”‚                          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                             â”‚                                               â”‚
â”‚                    Observer Pattern                                         â”‚
â”‚                  (Model notifies View)                                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚      UIComponent                      â”‚                                  â”‚
â”‚  â”‚   (Composite Pattern)                â”‚                                  â”‚
â”‚  â”‚                                      â”‚                                  â”‚
â”‚  â”‚  - render()                          â”‚                                  â”‚
â”‚  â”‚  - on_touch(x, y)                    â”‚                                  â”‚
â”‚  â”‚  - add_child()                       â”‚                                  â”‚
â”‚  â”‚  - Hierarchical nesting              â”‚                                  â”‚
â”‚  â”‚                                      â”‚                                  â”‚
â”‚  â”‚  â”Œâ”€ Button    â”Œâ”€ Modal    â”Œâ”€ List   â”‚                                  â”‚
â”‚  â”‚  â””â”€ Gauge     â””â”€ Panel     â””â”€ Text  â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚      EventBus                         â”‚                                  â”‚
â”‚  â”‚   (Pub/Sub)                          â”‚                                  â”‚
â”‚  â”‚                                      â”‚                                  â”‚
â”‚  â”‚  - publish(event)                    â”‚                                  â”‚
â”‚  â”‚  - subscribe(event_type, callback)   â”‚                                  â”‚
â”‚  â”‚  - unsubscribe(event_type, callback) â”‚                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 4: COMPONENT LIBRARY (7 Reusable Components)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Button  â”‚ â”‚Modal â”‚ â”‚TextDis â”‚ â”‚SelectionMnuâ”‚ â”‚Gauge â”‚ â”‚Panel â”‚ â”‚Listâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  All inherit from UIComponent:                                             â”‚
â”‚  - State-aware rendering (NORMAL, HOVER, PRESSED, ERROR, etc.)            â”‚
â”‚  - Touch event handling                                                    â”‚
â”‚  - Child component support                                                â”‚
â”‚  - Visibility and enabled states                                          â”‚
â”‚  - Theme-aware colors                                                     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 5: APPLICATION INTEGRATION (Planned)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  On Startup:                          During Execution:                    â”‚
â”‚  â”œâ”€ Load Preferences                   â”œâ”€ Update MenuState                 â”‚
â”‚  â”œâ”€ Initialize StateContainer          â”œâ”€ Track ToolState progress         â”‚
â”‚  â”œâ”€ Restore last theme                 â”œâ”€ Render with ThemeManager colors  â”‚
â”‚  â”œâ”€ Restore menu position              â”œâ”€ Save preferences on changes      â”‚
â”‚  â””â”€ Subscribe to changes               â””â”€ Auto-persist state               â”‚
â”‚                                                                              â”‚
â”‚  Tool Execution:                      Error Handling:                      â”‚
â”‚  â”œâ”€ Register ToolState                 â”œâ”€ Set error in ToolState           â”‚
â”‚  â”œâ”€ Mark running                       â”œâ”€ Update UI with error color       â”‚
â”‚  â”œâ”€ Update progress                    â”œâ”€ Log error message                â”‚
â”‚  â”œâ”€ Set results                        â”œâ”€ Allow retry/cancel               â”‚
â”‚  â””â”€ Mark complete                      â””â”€ Auto-clear on next action        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATA FLOW EXAMPLE: Port Scanner Execution
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  User                                                                       â”‚
â”‚    â”‚                                                                        â”‚
â”‚    â–¼ "Run Port Scan"                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚  â”‚ Controller   â”‚                                                          â”‚
â”‚  â”‚ (on_touch)   â”‚                                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼ Start                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚ Model.execute()      â”‚                                                  â”‚
â”‚  â”‚ PortScanner.scan()   â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼ Mark running                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚ ToolState.mark_     â”‚                                                   â”‚
â”‚  â”‚    running()         â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â”œâ”€â–¶ notify Model changed                                           â”‚
â”‚         â”‚   (Observer pattern)                                             â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼ For each port:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚ set_progress()       â”‚                                                  â”‚
â”‚  â”‚ (0.0 to 1.0)         â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â”œâ”€â–¶ notify Model changed                                           â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼ Done scanning                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚ mark_complete()      â”‚                                                  â”‚
â”‚  â”‚ set_result()         â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼ View renders                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚ View.render()        â”‚                                                  â”‚
â”‚  â”‚ - Get colors from    â”‚ â—€â”€â”€â”€ ThemeManager provides theme colors         â”‚
â”‚  â”‚   ThemeManager       â”‚                                                  â”‚
â”‚  â”‚ - Draw results       â”‚                                                  â”‚
â”‚  â”‚ - Update UI          â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼ Save state                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚  â”‚ PreferenceManager    â”‚                                                  â”‚
â”‚  â”‚ .save()              â”‚                                                  â”‚
â”‚  â”‚ - Last tool used     â”‚                                                  â”‚
â”‚  â”‚ - Results cached     â”‚                                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
â”‚                                                                              â”‚
â”‚  User sees results with theme colors, can go back, results persisted      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DIRECTORY STRUCTURE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  /home/cachy/dedsec/                                                        â”‚
â”‚  â”œâ”€â”€ ui/                    âœ… UI Framework (2,600 lines)                   â”‚
â”‚  â”‚   â”œâ”€â”€ __init__.py        (Exports all public classes)                   â”‚
â”‚  â”‚   â”œâ”€â”€ architecture.py    (MVC base, UIComponent, EventBus)             â”‚
â”‚  â”‚   â”œâ”€â”€ components.py      (7 reusable components)                       â”‚
â”‚  â”‚   â”œâ”€â”€ state.py           (MenuState, ToolState, StateContainer)        â”‚
â”‚  â”‚   â””â”€â”€ themes.py          (ThemeManager, 5 themes, color utils)         â”‚
â”‚  â”œâ”€â”€ core/                  ğŸ”„ Business Logic (TBD)                        â”‚
â”‚  â”‚   â”œâ”€â”€ __init__.py                                                      â”‚
â”‚  â”‚   â”œâ”€â”€ logging.py         (Structured logging - Task #13)               â”‚
â”‚  â”‚   â””â”€â”€ [tools here]                                                     â”‚
â”‚  â”œâ”€â”€ tests/                 ğŸ”„ Test Suite (TBD - Task #17)                â”‚
â”‚  â”‚   â”œâ”€â”€ __init__.py                                                      â”‚
â”‚  â”‚   â”œâ”€â”€ test_architecture.py                                             â”‚
â”‚  â”‚   â”œâ”€â”€ test_components.py                                               â”‚
â”‚  â”‚   â”œâ”€â”€ test_state.py                                                    â”‚
â”‚  â”‚   â””â”€â”€ test_themes.py                                                   â”‚
â”‚  â”œâ”€â”€ dedsec_ui.py           (Original UI, to be refactored)               â”‚
â”‚  â”œâ”€â”€ config.py              (Constants - Task #12)                         â”‚
â”‚  â””â”€â”€ [other files]                                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

IMPLEMENTATION STATUS: 45% COMPLETE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  Phase 1: Bug Fixes (Tasks 1-4)                      âœ… 100%  (Done)       â”‚
â”‚  â”œâ”€ Clock animation fix                             âœ…                    â”‚
â”‚  â”œâ”€ Terminal text visibility                        âœ…                    â”‚
â”‚  â”œâ”€ Modal blank windows                             âœ…                    â”‚
â”‚  â””â”€ Button responsiveness                           âœ…                    â”‚
â”‚                                                                              â”‚
â”‚  Phase 2: Architecture Foundation (Tasks 5-6)       âœ… 100%  (Done)       â”‚
â”‚  â”œâ”€ MVC base classes                                âœ…                    â”‚
â”‚  â”œâ”€ Component library                               âœ…                    â”‚
â”‚  â””â”€ Project structure                               âœ…                    â”‚
â”‚                                                                              â”‚
â”‚  Phase 3: State & Theme (Tasks 7-8, 15)             âœ… 100%  (Done)       â”‚
â”‚  â”œâ”€ State management                                âœ…                    â”‚
â”‚  â”œâ”€ Theme system                                    âœ…                    â”‚
â”‚  â””â”€ 5 cyberpunk themes                              âœ…                    â”‚
â”‚                                                                              â”‚
â”‚  Phase 4: Integration (Tasks 9, 12-14, 16, 19)      ğŸ”„  0%  (Next)        â”‚
â”‚  â”œâ”€ Canvas rendering refactor                       ğŸ”„                    â”‚
â”‚  â”œâ”€ Config extraction                               ğŸ”„                    â”‚
â”‚  â”œâ”€ Logging framework                               ğŸ”„                    â”‚
â”‚  â”œâ”€ Animation system                                ğŸ”„                    â”‚
â”‚  â”œâ”€ Visual feedback                                 ğŸ”„                    â”‚
â”‚  â””â”€ Developer guide update                          ğŸ”„                    â”‚
â”‚                                                                              â”‚
â”‚  Phase 5: Tool System (Tasks 10, 17-18, 20)         ğŸ”„  0%  (Later)       â”‚
â”‚  â”œâ”€ Tool registration                               ğŸ”„                    â”‚
â”‚  â”œâ”€ Test suite                                      ğŸ”„                    â”‚
â”‚  â”œâ”€ Diagnostics overlay                             ğŸ”„                    â”‚
â”‚  â””â”€ Type hints/comments                             ğŸ”„                    â”‚
â”‚                                                                              â”‚
â”‚  OVERALL: 9/20 TASKS = 45% COMPLETE                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Design Decisions

1. **MVC Pattern**: Separates model (logic) from view (rendering) from controller (input)
2. **Observer Pattern**: Models notify views of changes (decoupled)
3. **Composite Pattern**: UIComponent hierarchy enables complex UIs from simple pieces
4. **EventBus**: Pub/sub system for decoupled inter-component communication
5. **Preferences Persistence**: JSON storage with atomic writes for crash safety
6. **Theme System**: Complete color coverage (31 colors/theme) with runtime switching
7. **Abstract Base Classes**: Type-safe contracts for extensions

---

## Next Integration Points

When continuing to Task #9 (Rendering Refactor):
- Use MenuState for navigation display
- Use ToolState for progress bars
- Use ThemeManager for all colors
- Use components for modal windows
- Use EventBus for tool events

---

*Generated: November 22, 2025*  
*Phase: 3.2 Professional UI Refactoring*  
*Version: 3.2.1*
